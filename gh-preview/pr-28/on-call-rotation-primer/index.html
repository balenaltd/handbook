<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-on-call-rotation-primer">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.22">
<title data-rh="true">On-call rotation primer | Balena Handbook</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://handbook.balena.io/on-call-rotation-primer"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="On-call rotation primer | Balena Handbook"><meta data-rh="true" name="description" content="Note: UI references to specific services (&quot;the button in the top right&quot;) may not endure over time"><meta data-rh="true" property="og:description" content="Note: UI references to specific services (&quot;the button in the top right&quot;) may not endure over time"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://handbook.balena.io/on-call-rotation-primer"><link data-rh="true" rel="alternate" href="https://handbook.balena.io/on-call-rotation-primer" hreflang="en"><link data-rh="true" rel="alternate" href="https://handbook.balena.io/on-call-rotation-primer" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.27cb4732.css">
<link rel="preload" href="/assets/js/runtime~main.1c7bd72a.js" as="script">
<link rel="preload" href="/assets/js/main.85feb0ac.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/balena_icon.png" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/balena_icon.png" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Handbook</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/changelog">Change Log</a><a href="https://github.com/balenaltd/handbook" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Edit on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Welcome</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/access-requests/">Access Requests</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/balenalabs/">balenaLabs</a><button aria-label="Toggle the collapsible sidebar category &#x27;balenaLabs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/culture/">Culture</a><button aria-label="Toggle the collapsible sidebar category &#x27;Culture&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/development-support-and-process-guidelines">Development, Support and Process Guidelines</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/hardware/">Hardware</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hardware&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/how-we-work/">How we work: Jellyfish</a><button aria-label="Toggle the collapsible sidebar category &#x27;How we work: Jellyfish&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/meetings">Meetings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/offboarding/">Offboarding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/on-call-rotation-primer">On-call rotation primer</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/onboarding/">Onboarding</a><button aria-label="Toggle the collapsible sidebar category &#x27;Onboarding&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/policies/">Policies</a><button aria-label="Toggle the collapsible sidebar category &#x27;Policies&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/products-and-productization/">Products and Productization</a><button aria-label="Toggle the collapsible sidebar category &#x27;Products and Productization&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/security-guidelines">Security Guidelines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sre-resources">SRE Resources</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/team/">Team</a><button aria-label="Toggle the collapsible sidebar category &#x27;Team&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/tooling/">Tooling</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tooling&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">On-call rotation primer</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>On-call rotation primer</h1><p><strong>Note:</strong> UI references to specific services (&quot;the button in the top right&quot;) may not endure over time</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="i-setting-up-to-work-on-call">I. Setting up to work on call<a class="hash-link" href="#i-setting-up-to-work-on-call" title="Direct link to heading">​</a></h2><ol start="0"><li>(async) Request credentials for the services you will find in the <a href="/sre-resources">SRE Resources</a></li><li>Read this doc</li><li>Read the <a href="https://jel.ly.fish/view-all-faqs" target="_blank" rel="noopener noreferrer">DevOps Playbook</a> (topic filter: <code>devops</code>)</li><li>Check your DevOps on-call schedule in <a href="https://calendar.google.com/calendar/u/0?cid=Y19rdG43azdoZ2I4MjZsMThtbGw0aWxwamJsOEBncm91cC5jYWxlbmRhci5nb29nbGUuY29t" target="_blank" rel="noopener noreferrer">the DevOps calendar</a> or in VictorOps.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ii-the-basic-on-call-procedure">II. The basic on call procedure<a class="hash-link" href="#ii-the-basic-on-call-procedure" title="Direct link to heading">​</a></h2><p>Our incident handling procedure is described in new SRE Handbook - <a href="https://github.com/balena-io/sre-handbook/blob/main/oncall/incidents.md" target="_blank" rel="noopener noreferrer">here</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="iv-tools">IV. Tools<a class="hash-link" href="#iv-tools" title="Direct link to heading">​</a></h2><p>There are several services / aspects to know when working the on-call rotation</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-victorops">1. victorops<a class="hash-link" href="#1-victorops" title="Direct link to heading">​</a></h3><p>Alerts pop here. Alerts will page people according to an escalation policy.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="contact-methods--paging-policies">Contact methods / paging policies<a class="hash-link" href="#contact-methods--paging-policies" title="Direct link to heading">​</a></h4><ul><li>Set up via &quot;Contact methods&quot; and &quot;Paging policies&quot; in VictorOps UI</li><li>Very useful to have the application set up on your phone</li><li>Example policy: &quot;push notification to app, if not ack&#x27;d in 10 minutes, call me&quot;</li><li><strong>Your paging policy should ensure that you can be alerted, whatever method it is, it must be able to alert you reliably (if you are asleep, afk, etc.)</strong></li><li>The phone call number may be the same every time. You can put that contact in an exceptional group that will bypass &quot;do not disturb&quot;</li><li>There may be different numbers, at the very least you can try to add each of these</li><li>The alerts will contain information about the incident, possibly links to dashboards, etc.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="incident-lifetime">Incident lifetime<a class="hash-link" href="#incident-lifetime" title="Direct link to heading">​</a></h4><ol><li>triggered</li><li>acknowledged (VictorOps UI feature)<ul><li>Should only ACK if you know you&#x27;re going to be able to handle it.</li></ul></li><li>resolved (double check-mark button in top-right of incident ticket)</li></ol><p>(Incidents can be re-routed if you know someone else can handle the issue and you cannot)</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="filtering-incidents">Filtering incidents<a class="hash-link" href="#filtering-incidents" title="Direct link to heading">​</a></h4><p>There are going to be some test incidents, or other incidents not routed to you for whatever reason. &quot;Your incidents&quot; is a useful tab, for this reason.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="rotation-calendar">Rotation calendar<a class="hash-link" href="#rotation-calendar" title="Direct link to heading">​</a></h4><p>Can be viewed from <em>&quot;Teams&quot; &gt; &quot;Operations&quot; &gt; &quot;On-call schedule&quot;</em></p><p>We are working on syncing our rotation times to our Google Calendars.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-monitoring">2. Monitoring<a class="hash-link" href="#2-monitoring" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="staging">Staging<a class="hash-link" href="#staging" title="Direct link to heading">​</a></h4><ul><li>dashboards: monitor.balena-staging.com</li><li>prometheus: monitor.balena-staging.com/prometheus/graph</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="production">Production<a class="hash-link" href="#production" title="Direct link to heading">​</a></h4><ul><li>dashboards: monitor.balena-cloud.com</li><li>prometheus: monitor.balena-cloud.com/prometheus/graph</li></ul><p>Dashboards enable a more open-ended sort of observation of the system in various metrics. Visually, you can find indications of the roots of an incident, or at least observe its most proximate causes and effects, spikes, etc.</p><p>Familiarize yourself with the basic grafana UI so you can selected different time ranges, hover your cursor on the graphs to visually correlate data points across graphs, etc.</p><p>There will be a set of dashboards which are standard, well-reviewed, checked into source, and used most often.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-logentries">3. Logentries<a class="hash-link" href="#3-logentries" title="Direct link to heading">​</a></h3><p><a href="https://logentries.com/" target="_blank" rel="noopener noreferrer">https://logentries.com/</a></p><p>Production / staging logs for those systemd services which are integrated with logentries</p><ul><li>There is a quite powerful regex search box</li></ul><p>Let&#x27;s say you saw from the API dashboard that we have elevated 400&#x27;s. You can then come to Logentries and regex the logs to find example request paths, context of other kinds around specific requests.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-devops-playbook">4. DevOps Playbook<a class="hash-link" href="#4-devops-playbook" title="Direct link to heading">​</a></h3><p>Lots of accumulated knowledge based on previous incidents. What to do, when, etc.</p><p>Recommended reading <em>as preparation for taking on-call duties</em></p><ul><li>Jellyfish FAQs, filter by <code>topic is devops</code>. We recommend saving the filtered list as a view: <a href="https://jel.ly.fish/view-all-faqs" target="_blank" rel="noopener noreferrer">https://jel.ly.fish/view-all-faqs</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-ssh-access">5. SSH access<a class="hash-link" href="#5-ssh-access" title="Direct link to heading">​</a></h3><p>Services running on balenaCloud can be accessed using the balenaCloud dashboard web terminal or by using the <code>balena ssh</code> CLI command. Most of the servers running on Hetzner are running balenaOS and connected to balenaCloud.</p><p>Almost all EC2 instances running in our AWS environments can be accessed using <a href="https://aws.amazon.com/cli/" target="_blank" rel="noopener noreferrer">AWS CLI</a> with the <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager-working-with-install-plugin.html" target="_blank" rel="noopener noreferrer">Session Manager Plugin</a>.  Admin access to the environments are required to have SSH permissions to access the EC2 instances.</p><p>The ARM build servers running on Packet.net/Equinix are still accessed using the regular SSH client.  Please ask DevOps to add your keys to the servers to be able to access them.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-aws-console">6. AWS console<a class="hash-link" href="#6-aws-console" title="Direct link to heading">​</a></h3><p>Various services have their own subsections of the UI</p><p>For example, RDS &gt; Databases, in which you can view CPU, MEM, all those good things.</p><p>Most of the metrics you can find here will be in our cloudwatch exporter prometheus metrics / grafana dashboards</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-statuspage">7. StatusPage<a class="hash-link" href="#7-statuspage" title="Direct link to heading">​</a></h3><ul><li>outside view: status.balena.io</li><li>our view: manage.statuspage.io (need to get your BalenaIO creds)</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="components-ui">&quot;Components&quot; UI<a class="hash-link" href="#components-ui" title="Direct link to heading">​</a></h4><p>Lets you set a <em>status</em> on a given <em>component</em></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- Operational</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Degraded performance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Partial outage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Major outage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Under maintenance</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note: Partial / Major outage ought to correspond to incidents</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="incidents-ui">&quot;Incidents&quot; UI<a class="hash-link" href="#incidents-ui" title="Direct link to heading">​</a></h4><p>Lets you create <em>incidents</em></p><ul><li>Give it descriptive title - descriptive of the symptoms (ie. &quot;High error rate of API requests&quot;)</li><li>Depending how severe, you can write a small description which adds info to assuage user&#x27;s fears.</li><li>Checkbox of components affected, along with <em>status</em> (as above)</li><li>Incidents have a lifecycle of their own in StatusPage (distinct from VictorOps):<ul><li>investigating</li><li>identified</li><li>monitoring</li><li>resolved</li></ul></li><li>In the top-right, see the &quot;Apply template&quot; dropdown, which can help get you started</li><li>Hubot will ping the team in the Jellyfish<ul><li>can be snoozed only so long as it&#x27;s being worked on (snooze is not for &quot;ignore&quot;!)</li><li>reminds us to <em>close</em> the incident in StatusPage if it&#x27;s still up once we&#x27;ve resolved it</li></ul></li><li>Incidents can be edited over time as we progress</li></ul><p>You can also create <em>scheduled maintenance</em> advisories that will be posted on our Statuspage.
This can be added under the <em>Maintenances</em> tab.</p><ul><li>Scheduled maintenances have a lifecycle of their own in StatusPage (distinct from VictorOps):<ul><li>scheduled</li><li>in progress</li><li>verifying</li><li>completed</li></ul></li><li>Scheduled maintenances should be posted at least a week before the maintenance period to make sure
that users are aware that some services may not be available at the time of the maintenance.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="8-end-to-end-tests-jenkins">8. End-to-end tests (jenkins)<a class="hash-link" href="#8-end-to-end-tests-jenkins" title="Direct link to heading">​</a></h3><p>We regularly run end-to-end (e2e) tests on Jenkins.</p><p>Our VictorOps alerts for e2e contain links to the relevant resources / logs in Jenkins (@ <a href="http://jenkins.product-os.io" target="_blank" rel="noopener noreferrer">http://jenkins.product-os.io</a>)</p><ul><li>Navigate to the E2E job in the Jenkins instance using this link: <a href="https://jenkins.product-os.io/view/__hack__/job/balena-e2e-ephemeral/" target="_blank" rel="noopener noreferrer">balena-e2e-ephemeral</a></li><li>Open the specific job</li><li>View &quot;Console output&quot;<ul><li>The logs are very verbose about what tests are being performed, so the specific point of failure can usually be identified</li><li>That said, there may not be much information about <em>why</em> that specific point failed (for example, we&#x27;ll get, &quot;Checking if kernel module loading works&quot; will be &quot;<code>[FAIL]</code>&quot;</li></ul></li></ul><p>Ocassionally, retrying the e2e tests may cause a pass (they are somewhat flakey as of this writing! Thu 05 Dec 2019 01:11:21 PM EST).  E2E tests may fail if the balenaCloud API is slow to respond and may indicate that something within the backend may need to be optimized (adding more resources, adding an index to a table, etc.).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="9-healthchecksio">9. Healthchecks.io<a class="hash-link" href="#9-healthchecksio" title="Direct link to heading">​</a></h3><p>Hourly e2e tests have a dead man&#x27;s switch alert configured via this service (if no e2e test)
Consecutive failures for &gt; 1h also alert here.</p><p>If you have received an alert that originates from Healthchecks.io, check the <a href="https://jenkins.product-os.io/view/__hack__/job/balena-e2e-ephemeral/" target="_blank" rel="noopener noreferrer">E2E jobs</a> in Jenkins to investigate why the jobs do not start or why the jobs continue to fail.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="10-nodeping">10. Nodeping<a class="hash-link" href="#10-nodeping" title="Direct link to heading">​</a></h3><p>Nodeping contains periodic healthchecks that ping the balenaCloud endpoints.  This service triggers webhook calls to Statuspage &amp; VictorOps when a service is inaccessible.  This is usually one of the first things to check to see what response has been received from the service being checked.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-equinixpacketnet-arm-builders">11. Equinix/Packet.net (ARM builders)<a class="hash-link" href="#11-equinixpacketnet-arm-builders" title="Direct link to heading">​</a></h3><ul><li>The servers hosted in Equinix are provisioned using Terraform: <a href="https://github.com/balena-io/environment-production/blob/balena-api-switch-replica/terraform/packet/packet_devices.tf" target="_blank" rel="noopener noreferrer">environment-production repo</a></li><li>The SSH keys to access the servers are also managed using Terraform.  Please inform DevOps if you need access to the servers.</li></ul><p>The running ARM servers are registered to the balena-builder backend in <a href="https://github.com/balena-io/environment-production/blob/master/kubernetes/balenacloud/balena-builder/configmap.yaml#L4-L6" target="_blank" rel="noopener noreferrer">this configuration file</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-deployments--rollbacks">12. Deployments &amp; Rollbacks<a class="hash-link" href="#12-deployments--rollbacks" title="Direct link to heading">​</a></h3><p>Deployments for components that run in the production Kubernetes cluster can be done using <a href="https://jenkins.product-os.io/view/__hack__/job/Deploy-Component-To-Production/" target="_blank" rel="noopener noreferrer">this deployment job</a> in Jenkins.  The allows you to select an existing component and set the version to be deployed.  We can use the same job to rollback components to a previous version.  The job manipulates the Kubernetes configuration files stored in the <a href="https://github.com/balena-io/environment-production" target="_blank" rel="noopener noreferrer">environment-production repo</a> which are then applied to the production cluster using <a href="https://fluxcd.io/" target="_blank" rel="noopener noreferrer">flux</a>.</p><p>Components that run the in staging Kubernetes cluster are automatically updated to the latest version. <a href="https://fluxcd.io/" target="_blank" rel="noopener noreferrer">flux</a> queries the docker image repositories for the latest semantic versions and applies the latest version to the Kubernetes configuration files in the <a href="https://github.com/balena-io/environment-staging" target="_blank" rel="noopener noreferrer">environment-stagin repo</a>.</p><p>We have started moving components such as Jellyfish/balenaChat from Kubernetes to balenaCloud. These components are updated the same way apps are updated in balenaCloud.  Rollbacks can be done by pinning the fleet to a previous version.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/balenaltd/handbook/edit/main/docs/on-call-rotation-primer.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/offboarding/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Offboarding</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/onboarding/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Onboarding</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#i-setting-up-to-work-on-call" class="table-of-contents__link toc-highlight">I. Setting up to work on call</a></li><li><a href="#ii-the-basic-on-call-procedure" class="table-of-contents__link toc-highlight">II. The basic on call procedure</a></li><li><a href="#iv-tools" class="table-of-contents__link toc-highlight">IV. Tools</a><ul><li><a href="#1-victorops" class="table-of-contents__link toc-highlight">1. victorops</a></li><li><a href="#2-monitoring" class="table-of-contents__link toc-highlight">2. Monitoring</a></li><li><a href="#3-logentries" class="table-of-contents__link toc-highlight">3. Logentries</a></li><li><a href="#4-devops-playbook" class="table-of-contents__link toc-highlight">4. DevOps Playbook</a></li><li><a href="#5-ssh-access" class="table-of-contents__link toc-highlight">5. SSH access</a></li><li><a href="#6-aws-console" class="table-of-contents__link toc-highlight">6. AWS console</a></li><li><a href="#7-statuspage" class="table-of-contents__link toc-highlight">7. StatusPage</a></li><li><a href="#8-end-to-end-tests-jenkins" class="table-of-contents__link toc-highlight">8. End-to-end tests (jenkins)</a></li><li><a href="#9-healthchecksio" class="table-of-contents__link toc-highlight">9. Healthchecks.io</a></li><li><a href="#10-nodeping" class="table-of-contents__link toc-highlight">10. Nodeping</a></li><li><a href="#11-equinixpacketnet-arm-builders" class="table-of-contents__link toc-highlight">11. Equinix/Packet.net (ARM builders)</a></li><li><a href="#12-deployments--rollbacks" class="table-of-contents__link toc-highlight">12. Deployments &amp; Rollbacks</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Imagined by Balena. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1c7bd72a.js"></script>
<script src="/assets/js/main.85feb0ac.js"></script>
</body>
</html>